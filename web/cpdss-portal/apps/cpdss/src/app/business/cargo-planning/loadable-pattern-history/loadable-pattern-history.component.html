<div class="container-fluid" *cpdssPortalPermission="loadablePatternPermissionContext">
    <div class="row pb-20">
        <div class="col vessel-info-wrapper">
            <cpdss-portal-vessel-info *ngIf="vesselInfo" [vesselDetails]="vesselInfo"></cpdss-portal-vessel-info>
        </div>
        <div class="col">
            <h5 class="main-head inline-block">{{'LOADABLE_PATTERN_HISTORY_HEADER_FIRST' | translate}} {{loadableStudyName | uppercase}} {{'LOADABLE_PATTERN_HISTORY_HEADER_SECOND' | translate}}</h5>
            <div class=" mr-10 text-secondary">
                {{loadablePatternCreatedDate}}</div>

        </div>

        <div class="ml-auto pr-15">
            <span class="ml-20 mr-10">
                {{'LOADABLE_PATTERN_HISTORY_UNIT_LABEL' | translate}}</span>
            <p-dropdown id="pattern_history_dropdown" [filter]="true" class="mr-10 "
                styleClass="form-control dropdown-w-100" [options]="units" optionLabel="name" placeholder="Unit" [disabled]="true">
            </p-dropdown>
            <button class="btn btn-main mr-10" id="btn_callNewLoadableStudyPopup"
                (click)="openSidePane=!openSidePane">{{'LOADABLE_PATTERN_HISTORY_BUTTON_LABEL' | translate}}</button>
            <button class="btn btn-main" id="btn_callNewLoadableStudyPopup"
                (click)="backToLoadableStudy()">{{'LOADABLE_PATTERN_HISTORY_BACK_TO_LOADABLE_STUDY_BUTTON_LABEL' |
                translate}}</button>
        </div>

    </div>
    <div class="content-outer" [ngClass]="{'sidebar-collapsed': !openSidePane}">
        <div class="sidebar  relative">
            <a class="sidebar-collapse-btn" (click)="openSidePane=!openSidePane"></a>
            <div class="sidebar-content">
                <cpdss-portal-side-panel-loadable-study-list [vesselInfo]="vesselInfo" [voyage]="selectedVoyage"
                    [(selectedLoadableStudy)]="selectedLoadableStudy" [loadableStudies]="loadableStudies"
                    (deleteLoadableStudy)="onDeleteLoadableStudy($event)"
                    (selectedLoadableStudyChange)="onLoadableStudyChange($event)">
                </cpdss-portal-side-panel-loadable-study-list>
            </div>
        </div>
        <div class="pl-30">
            <div class="row">
                <div *ngFor="let loadablePattern of loadablePatterns; let i = index" class="col-6 pb-15 pt-10 content-pattern">
                    <cpdss-portal-pattern-case [loadablePattern]="loadablePattern" [tankList]="tankLists" [index]="i + 1" (displayCommingleDetailPopup)="displayCommingleDetailPopup($event)">
                    </cpdss-portal-pattern-case>
                    <div class="row">
                        <div class="col-7 text-center pt-20">
                            <button class="btn btn-main mr-10" (click)="viewPlan()">{{'LOADABLE_PATTERN_HISTORY_VIEW_PLAN_BUTTON_LABEL' |
                                translate}}</button>
                            <button class="btn btn-main">{{'LOADABLE_PATTERN_HISTORY_CONFIRM_PLAN_BUTTON_LABEL' |
                                translate}}</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<cpdss-portal-commingle-cargo-details-pop-up [display]="display" [selectedLoadablePatterns]="selectedLoadablePatterns" [vesselId]="vesselId" [voyageId]="voyageId" [loadableStudyId]="loadableStudyId" (displayPopup)="setPopupVisibility($event)" *ngIf="display"></cpdss-portal-commingle-cargo-details-pop-up>