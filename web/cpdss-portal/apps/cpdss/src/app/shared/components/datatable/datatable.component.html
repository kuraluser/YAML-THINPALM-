<div *ngIf="form" [formGroup]="form" class="row">
    <div formArrayName="dataTable" class="col">
        <p-table #datatable [columns]="columns" [value]="value" [editMode]="editMode" [selectionMode]="selectionMode"
            (onEditComplete)="onEditComplete($event)" (onRowSelect)="onRowSelect($event)" [(selection)]="selection"
            (columnClick)="onClick($event)" [reorderableColumns]="tableRowReOrder" (onRowReorder)="onRowReorder($event)"
            (onFilter)="onFilter($event)" [customSort]="customSort" (sortFunction)="sortFunction($event)">
            <ng-template pTemplate="colgroup" let-columns>
                <colgroup>
                    <col *ngIf="tableRowReOrder" class="column-class re-order">
                    <ng-container *ngFor="let col of columns">
                        <col *ngIf="!col?.columns?.length" class="column-class" [class]="col.fieldHeaderClass"
                            [ngClass]="{'column-actions': col?.field === 'actions'}">
                        <col *ngFor="let subCol of col?.columns" class="column-class" [class]="subCol.fieldHeaderClass">
                    </ng-container>
                </colgroup>
            </ng-template>
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th *ngIf="tableRowReOrder"></th>
                    <th *ngFor="let col of columns" [pSortableColumn]="col?.sortField ? col?.sortField : col.field"
                        [pSortableColumnDisabled]="!col.sortable" [colSpan]="col?.columns?.length">
                        <ng-container *ngIf="!col?.columns?.length else colGrouping">
                            <span>{{col.header| translate}}</span>
                            <p-sortIcon [field]="col?.sortField ? col?.sortField : col.field" *ngIf="col.sortable">
                            </p-sortIcon>
                        </ng-container>
                        <ng-template #colGrouping>
                            <table>
                                <tr>
                                    <th [colSpan]="col?.columns?.length">
                                        <span>{{col.header| translate}}</span>
                                        <p-sortIcon [field]="col?.sortField ? col?.sortField : col.field"
                                            *ngIf="col.sortable"></p-sortIcon>
                                    </th>
                                </tr>
                                <tr>
                                    <th *ngFor="let subCol of col?.columns">
                                        <span>{{subCol.header| translate}}</span>
                                        <p-sortIcon [field]="subCol?.sortField ? subCol?.sortField : subCol.field"
                                            *ngIf="subCol.sortable"></p-sortIcon>
                                    </th>
                                </tr>
                            </table>
                        </ng-template>
                    </th>
                </tr>
                <tr *ngIf="filterable">
                    <th *ngIf="tableRowReOrder"></th>
                    <ng-container *ngFor="let col of columns">
                        <th *ngIf="!col?.columns?.length">
                            <ng-container *ngIf="col.filter" [ngSwitch]="col.filterType">
                                <input *ngSwitchCase="filterType.TEXT" type="text" id="{{col.field+'_filter'}}"
                                    (input)="datatable.filter(($event.target.value).trim(), col?.filterField ? col?.filterField : col.field, col.filterMatchMode)"
                                    [placeholder]="col.filterPlaceholder| translate" class="p-column-filter">
                                <input *ngSwitchCase="filterType.NUMBER" type="number" id="{{col.field+'_filter'}}"
                                    (input)="datatable.filter($event.target.value, col?.filterField ? col?.filterField : col.field, col.filterMatchMode)"
                                    [placeholder]="col.filterPlaceholder| translate" class="p-column-filter">
                                <input *ngSwitchCase="filterType.ARRAY" type="text" id="{{col.field+'_filter'}}"
                                    (input)="datatable.filter($event.target.value.trim(), col.arrayFilterField, col.filterMatchMode)"
                                    [placeholder]="col.filterPlaceholder| translate" class="p-column-filter">
                                <p-calendar appendTo="body" *ngSwitchCase="filterType.DATE"
                                    [maxDate]="col.filterFieldMaxvalue"
                                    (onSelect)="onDateSelect($event, col?.filterField, col?.filterMatchMode)"
                                    (onInput)="onDateFilter($event.target.value, col?.filterField, col?.filterMatchMode)"
                                    (onClearClick)="datatable.filter('', col?.filterField, 'contains')"
                                    [showButtonBar]="true" styleClass="p-column-filter"
                                    [placeholder]="col.filterPlaceholder| translate" [readonlyInput]="false"
                                    dateFormat="dd-mm-yy" id="{{col.field+'_filter'}}">
                                </p-calendar>
                                <p-dropdown *ngSwitchCase="filterType.SELECT" [options]="listData[col.filterListName]"
                                    [showClear]="true" appendTo="body" optionLabel="name"
                                    [placeholder]="col.filterPlaceholder| translate"
                                    (onChange)="datatable.filter($event.value?.id, col?.filterField ? col?.filterField : col.field, col.filterMatchMode)">
                                </p-dropdown>
                            </ng-container>
                        </th>
                        <ng-container *ngFor="let subCol of col?.columns">
                            <th>
                                <ng-container *ngIf="subCol.filter" [ngSwitch]="subCol.filterType">
                                    <input *ngSwitchCase="filterType.TEXT" type="text" id="{{subCol.field+'_filter'}}"
                                        (input)="datatable.filter(($event.target.value).trim(), subCol?.filterField ? subCol?.filterField : subCol.field, subCol.filterMatchMode)"
                                        [placeholder]="subCol.filterPlaceholder| translate" class="p-column-filter">
                                    <input *ngSwitchCase="filterType.NUMBER" type="number"
                                        id="{{subCol.field+'_filter'}}"
                                        (input)="datatable.filter($event.target.value, subCol?.filterField ? subCol?.filterField : subCol.field, subCol.filterMatchMode)"
                                        [placeholder]="subCol.filterPlaceholder| translate" class="p-column-filter">
                                    <input *ngSwitchCase="filterType.ARRAY" type="text" id="{{subCol.field+'_filter'}}"
                                        (input)="datatable.filter($event.target.value.trim(), subCol.arrayFilterField, subCol.filterMatchMode)"
                                        [placeholder]="subCol.filterPlaceholder| translate" class="p-column-filter">
                                    <p-calendar appendTo="body" *ngSwitchCase="filterType.DATE"
                                        [maxDate]="subCol.filterFieldMaxvalue"
                                        (onSelect)="onDateSelect($event, subCol?.filterField, subCol?.filterMatchMode)"
                                        (onInput)="onDateFilter($event.target.value, subCol?.filterField, subCol?.filterMatchMode)"
                                        (onClearClick)="datatable.filter('', subCol.field, 'contains')"
                                        [showButtonBar]="true" styleClass="p-column-filter"
                                        [placeholder]="subCol.filterPlaceholder| translate" [readonlyInput]="false"
                                        dateFormat="dd-mm-yy" id="{{subCol.field+'_filter'}}">
                                    </p-calendar>
                                    <p-dropdown *ngSwitchCase="filterType.SELECT"
                                        [options]="listData[col.filterListName]" [showClear]="true" appendTo="body"
                                        optionLabel="name" [placeholder]="col.filterPlaceholder| translate"
                                        (onChange)="datatable.filter($event.value?.id, col?.filterField ? col?.filterField : col.field, col.filterMatchMode)">
                                    </p-dropdown>
                                </ng-container>
                            </th>
                        </ng-container>
                    </ng-container>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex" let-columns="columns">
                <tr formGroupName="{{rowIndex}}" [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex"
                    [pSelectableRowDisabled]="!selectionMode" [pReorderableRow]="row(rowIndex)?.valid && rowIndex">
                    <td *ngIf="tableRowReOrder">
                        <span class="pi pi-bars" pReorderableRowHandle></span>
                    </td>
                    <ng-container *ngFor="let col of columns; let colIndex = index">
                        <td *ngIf="!col?.columns?.length" [class]="col.fieldClass" [ngSwitch]="col.fieldType"
                            [pEditableColumn]="rowData" [pEditableColumnField]="col.field"
                            [pEditableColumnRowIndex]="rowIndex" (click)="onClick($event, rowData, rowIndex, col)">
                            <div [attr.tabindex]="col.field !== 'actions' && col.fieldType !== fieldType.SLNO ? (rowIndex*10)+colIndex+rowIndex : null"
                                (keyup)="onFocus($event, rowData, rowIndex, col, colIndex)">
                                <span *ngSwitchCase="fieldType.SLNO">{{rowData[col.field]}}</span>
                                <span *ngSwitchCase="fieldType.ICON"><i
                                        class="{{col.fieldValueIcon+'-'+rowData[col.field]}}"></i></span>

                                <ng-container *ngSwitchCase="fieldType.ACTION">
                                    <div class="action-buttons" *ngIf="!rowData.isLoadable">
                                        <p-splitButton appendTo="body" id="{{tableId + 'split_button_' + rowIndex}}"
                                            *ngIf="col.actions.length > 1" icon="null"
                                            menuStyleClass="grid-dropdown-menu" styleClass="grid-dropdown-icon"
                                            [model]="getMoreOptions(rowData)"
                                            (onDropdownClick)="onDropdownClick($event, rowData, rowIndex, col)">
                                        </p-splitButton>
                                        <a type="button" id="{{tableId + 'option_button' + rowIndex}}"
                                            class="{{moreOptions[0].icon}}" *ngIf="col.actions.length === 1"
                                            (click)="onOptionClick($event, rowData, rowIndex, col, moreOptions[0])"></a>
                                    </div>
                                </ng-container>

                                <ng-container *ngSwitchCase="fieldType.TEXT">
                                    <ng-container *ngIf="rowData[col.field]?.isEditMode">
                                        <input type="text" class="form-control" [formControlName]="col.field"
                                            [placeholder]="col.fieldPlaceholder| translate"
                                            (change)="onChange($event, rowData, rowIndex, col)"
                                            id="{{col.field+'_'+rowIndex}}"
                                            [readonly]="!rowData[col.field]?.isEditable">
                                        <cpdss-portal-validation-error [errors]="fieldError(rowIndex, col.field)"
                                            [errorMessages]="col.errorMessages">
                                        </cpdss-portal-validation-error>
                                    </ng-container>
                                    <ng-container *ngIf="!rowData[col.field]?.isEditMode">
                                        <span>{{rowData[col.field].value}}</span>
                                    </ng-container>
                                </ng-container>

                                <ng-container *ngSwitchCase="fieldType.NUMBER">
                                    <ng-container *ngIf="rowData[col.field]?.isEditMode">
                                        <input type="number" class="form-control" [formControlName]="col.field"
                                            [placeholder]="col.fieldPlaceholder| translate"
                                            (change)="onChange($event, rowData, rowIndex, col)"
                                            id="{{col.field+'_'+rowIndex}}">
                                        <i *ngIf="rowData[col.field]?.value && col.fieldValueIcon"
                                            class="{{col.fieldValueIcon}}"
                                            (click)="onCellValueClick($event, rowData, rowIndex, col)"></i>
                                        <cpdss-portal-validation-error [errors]="fieldError(rowIndex, col.field)"
                                            [errorMessages]="col.errorMessages">
                                        </cpdss-portal-validation-error>
                                    </ng-container>
                                    <ng-container *ngIf="!rowData[col.field]?.isEditMode">
                                        <span>{{rowData[col.field]?.value}}{{rowData[col.field]?.value? col.fieldSuffix
                                            : ''}}
                                            <i *ngIf="rowData[col.field]?.value && col.fieldValueIcon"
                                                class="{{col.fieldValueIcon}}"
                                                (click)="onCellValueClick($event, rowData, rowIndex, col)"></i></span>
                                    </ng-container>
                                </ng-container>

                                <ng-container *ngSwitchCase="fieldType.SELECT">
                                    <ng-container *ngIf="rowData[col.field]?.isEditMode">
                                        <p-dropdown [options]="listData[col.listName]" styleClass="form-control"
                                            appendTo="body" [formControlName]="col.field" [filter]="col.listFilter"
                                            optionLabel="{{col.fieldOptionLabel}}"
                                            [placeholder]="col.fieldPlaceholder| translate"
                                            (onChange)="onChange($event, rowData, rowIndex, col)"
                                            id="{{col.field+'_'+rowIndex}}">
                                        </p-dropdown>
                                        <cpdss-portal-validation-error [errors]="fieldError(rowIndex, col.field)"
                                            [errorMessages]="col.errorMessages">
                                        </cpdss-portal-validation-error>
                                    </ng-container>
                                    <ng-container *ngIf="!rowData[col.field]?.isEditMode">
                                        <span *ngIf="rowData[col.field]?.value?.name">{{ rowData[col.field]?.value?.name
                                            }}</span>
                                        <span *ngIf="rowData[col.field]?.value?.operationName">{{
                                            rowData[col.field]?.value?.operationName }}</span>
                                        <span
                                            *ngIf="!rowData[col.field]?.value?.name && !rowData[col.field]?.value?.operationName">{{
                                            rowData[col.field]?.value }}</span>
                                    </ng-container>
                                </ng-container>


                                <ng-container *ngSwitchCase="fieldType.COLOR" class="col no-left-padding"
                                    style="max-width: 20px;">
                                    <div class="color-rounded mt-5"
                                        [ngStyle]="rowData[col.field].value && {'background' : rowData[col.field].value}">
                                    </div>
                                </ng-container>

                                <ng-container *ngSwitchCase="fieldType.COLORPICKER">
                                    <ng-container *ngIf="rowData[col.field]?.isEditMode">
                                        <p-colorPicker [formControlName]="col.field"
                                            [ngClass]="{'empty': !rowData[col.field]?.value}"
                                            (onChange)="onChange($event, rowData, rowIndex, col)"
                                            id="{{col.field+'_'+rowIndex}}"></p-colorPicker>
                                        <cpdss-portal-validation-error [errors]="fieldError(rowIndex, col.field)"
                                            [errorMessages]="col.errorMessages">
                                        </cpdss-portal-validation-error>
                                    </ng-container>
                                    <ng-container *ngIf="!rowData[col.field]?.isEditMode">
                                        <div class="colorpicker p-colorpicker-preview p-inputtext"
                                            [style.background-color]="rowData[col.field]?.value">
                                        </div>
                                    </ng-container>
                                </ng-container>

                                <ng-container *ngSwitchCase="fieldType.ARRAY">
                                    <ng-container *ngIf="rowData[col.field]?.isEditMode">
                                        <a class="btn btn-secondary"
                                            (click)="onCellValueClick($event, rowData, rowIndex, col)"
                                            id="{{col.field+'_'+rowIndex}}">{{rowData[col.arrayLabelField] ?
                                            rowData[col.arrayLabelField]: col.fieldPlaceholder| translate}}</a>
                                        <cpdss-portal-validation-error [errors]="fieldError(rowIndex, col.field)"
                                            [errorMessages]="col.errorMessages">
                                        </cpdss-portal-validation-error>
                                    </ng-container>
                                    <ng-container *ngIf="!rowData[col.field]?.isEditMode">
                                        <a>{{rowData[col.arrayLabelField]}}</a>
                                    </ng-container>
                                </ng-container>
                                <ng-container *ngSwitchCase="fieldType.DATERANGE">
                                    <ng-container *ngIf="rowData[col.field]?.isEditMode">
                                        <p-calendar appendTo="body" [showButtonBar]="true" [readonlyInput]="true"
                                            (onSelect)="onDateRangeSelect($event, rowIndex, col.field, rowData)"
                                            (onClearClick)="onClearDateRange($event, rowIndex, col.field,rowData)"
                                            [dateFormat]="col.dateFormat" selectionMode="range"
                                            [placeholder]="col.fieldPlaceholder| translate" [minDate]="col.minDate"
                                            id="{{col.field+'_'+rowIndex}}" #coldaterange>
                                            <p-footer><button class="btn btn-main"
                                                (click)="coldaterange.hideOverlay()">{{'DATA_TABLE_OK_BUTTON_LABEL'
                                                    |
                                                    translate}}</button></p-footer>
                                        </p-calendar>
                                        <cpdss-portal-validation-error [errors]="fieldError(rowIndex, col.field)"
                                            [errorMessages]="col.errorMessages">
                                        </cpdss-portal-validation-error>
                                    </ng-container>
                                    <ng-container *ngIf="!rowData[col.field]?.isEditMode">
                                        <span *ngIf="rowData[col.field]?.value?.name">{{ rowData[col.field]?.value?.name
                                            }}</span>
                                        <span *ngIf="!rowData[col.field]?.value?.name">{{ rowData[col.field]?.value
                                            }}</span>
                                    </ng-container>
                                </ng-container>
                                <ng-container *ngSwitchCase="fieldType.DATETIME">
                                    <ng-container *ngIf="rowData[col.field]?.isEditMode">
                                        <p-calendar appendTo="body" [showTime]="true" [showButtonBar]="true"
                                            [readonlyInput]="false"
                                            (onSelect)="onDateTimeSelect($event,rowIndex, col.field,rowData)"
                                            [placeholder]="col.fieldPlaceholder| translate"
                                            id="{{col.field+'_'+rowIndex}}" [minDate]="col.minDate"
                                            [dateFormat]="col.dateFormat"
                                            (onClearClick)="onDateTimeNotSelected($event, rowIndex, col.field,rowData)"
                                            [hideOnDateTimeSelect]="false" #coldatetime>
                                            <p-footer><button class="btn btn-main"
                                                (click)="coldatetime.hideOverlay()">{{'DATA_TABLE_OK_BUTTON_LABEL' |
                                                    translate}}</button></p-footer>
                                        </p-calendar>
                                        <cpdss-portal-validation-error [errors]="fieldError(rowIndex, col.field)"
                                            [errorMessages]="col.errorMessages">
                                        </cpdss-portal-validation-error>
                                    </ng-container>
                                    <ng-container *ngIf="!rowData[col.field]?.isEditMode">
                                        <span *ngIf="rowData[col.field]?.value?.name">{{ rowData[col.field]?.value?.name
                                            }}</span>
                                        <span *ngIf="!rowData[col.field]?.value?.name">{{ rowData[col.field]?.value
                                            }}</span>
                                    </ng-container>
                                </ng-container>
                                <span *ngSwitchDefault>{{rowData[col.field]}}</span>
                            </div>
                        </td>
                        <td *ngFor="let subCol of col?.columns; let subColIndex = index" [class]="subCol.fieldClass"
                            [ngSwitch]="subCol.fieldType" [pEditableColumn]="rowData"
                            [pEditableColumnField]="subCol.field" [pEditableColumnRowIndex]="rowIndex"
                            (click)="onClick($event, rowData, rowIndex, subCol)">
                            <div [attr.tabindex]="subCol.field !== 'actions' && subCol.fieldType !== fieldType.SLNO ? (rowIndex*10)+colIndex+subColIndex+rowIndex : null"
                                (keyup)="onFocus($event, rowData, rowIndex, subCol, colIndex+subColIndex)">
                                <span *ngSwitchCase="fieldType.SLNO">{{rowData[subCol.field]}}</span>
                                <span *ngSwitchCase="fieldType.ICON"><i
                                        class="{{subCol.fieldValueIcon+'-'+rowData[subCol.field]}}"></i></span>

                                <ng-container *ngSwitchCase="fieldType.ACTION">
                                    <div class="action-buttons" *ngIf="!rowData.isLoadable">
                                        <p-splitButton appendTo="body" id="{{tableId + 'split_button_' + rowIndex}}"
                                            *ngIf="col.actions.length > 1" icon="null"
                                            menuStyleClass="grid-dropdown-menu" styleClass="grid-dropdown-icon"
                                            [model]="getMoreOptions(rowData)"
                                            (onDropdownClick)="onDropdownClick($event, rowData, rowIndex, col)">
                                        </p-splitButton>
                                        <a type="button" id="{{tableId + 'option_button' + rowIndex}}"
                                            class="{{moreOptions[0].icon}}" *ngIf="col.actions.length === 1"
                                            (click)="onOptionClick($event, rowData, rowIndex, col, moreOptions[0])"></a>
                                    </div>
                                </ng-container>

                                <ng-container *ngSwitchCase="fieldType.TEXT">
                                    <ng-container *ngIf="rowData[subCol.field]?.isEditMode">
                                        <input type="text" class="form-control" [formControlName]="subCol.field"
                                            [placeholder]="subCol.fieldPlaceholder| translate"
                                            (change)="onChange($event, rowData, rowIndex, subCol)"
                                            id="{{subCol.field+'_'+rowIndex}}"
                                            [readonly]="!rowData[subCol.field]?.isEditable">
                                        <cpdss-portal-validation-error [errors]="fieldError(rowIndex, subCol.field)"
                                            [errorMessages]="subCol.errorMessages">
                                        </cpdss-portal-validation-error>
                                    </ng-container>
                                    <ng-container *ngIf="!rowData[subCol.field]?.isEditMode">
                                        <span>{{rowData[subCol.field].value}}</span>
                                    </ng-container>
                                </ng-container>

                                <ng-container *ngSwitchCase="fieldType.NUMBER">
                                    <ng-container *ngIf="rowData[subCol.field]?.isEditMode">
                                        <input type="number" class="form-control" [formControlName]="subCol.field"
                                            [placeholder]="subCol.fieldPlaceholder| translate"
                                            (change)="onChange($event, rowData, rowIndex, subCol)"
                                            id="{{subCol.field+'_'+rowIndex}}">
                                        <i *ngIf="rowData[subCol.field]?.value && subCol.fieldValueIcon"
                                            class="{{subCol.fieldValueIcon}}"
                                            (click)="onCellValueClick($event, rowData, rowIndex, subCol)"></i>
                                        <cpdss-portal-validation-error [errors]="fieldError(rowIndex, subCol.field)"
                                            [errorMessages]="subCol.errorMessages">
                                        </cpdss-portal-validation-error>
                                    </ng-container>
                                    <ng-container *ngIf="!rowData[subCol.field]?.isEditMode">
                                        <span>{{rowData[subCol.field]?.value}}{{rowData[subCol.field]?.value?
                                            subCol.fieldSuffix : ''}}
                                            <i *ngIf="rowData[subCol.field]?.value && subCol.fieldValueIcon"
                                                class="{{subCol.fieldValueIcon}}"
                                                (click)="onCellValueClick($event, rowData, rowIndex, subCol)"></i></span>
                                    </ng-container>
                                </ng-container>

                                <ng-container *ngSwitchCase="fieldType.SELECT">
                                    <ng-container *ngIf="rowData[subCol.field]?.isEditMode">
                                        <p-dropdown [options]="listData[subCol.listName]" styleClass="form-control"
                                            appendTo="body" [formControlName]="subCol.field"
                                            [filter]="subCol.listFilter" optionLabel="{{subCol.fieldOptionLabel}}"
                                            [placeholder]="subCol.fieldPlaceholder| translate"
                                            (onChange)="onChange($event, rowData, rowIndex, subCol)"
                                            id="{{subCol.field+'_'+rowIndex}}">
                                        </p-dropdown>
                                        <cpdss-portal-validation-error [errors]="fieldError(rowIndex, subCol.field)"
                                            [errorMessages]="subCol.errorMessages">
                                        </cpdss-portal-validation-error>
                                    </ng-container>
                                    <ng-container *ngIf="!rowData[subCol.field]?.isEditMode">
                                        <span *ngIf="rowData[subCol.field]?.value?.name">{{
                                            rowData[subCol.field]?.value?.name }}</span>
                                        <span *ngIf="rowData[subCol.field]?.value?.operationName">{{
                                            rowData[subCol.field]?.value?.operationName }}</span>
                                        <span
                                            *ngIf="!rowData[subCol.field]?.value?.name && !rowData[subCol.field]?.value?.operationName">{{
                                            rowData[subCol.field]?.value }}</span>
                                    </ng-container>
                                </ng-container>

                                <ng-container *ngSwitchCase="fieldType.COLORPICKER">
                                    <ng-container *ngIf="rowData[subCol.field]?.isEditMode">
                                        <p-colorPicker [formControlName]="subCol.field"
                                        [ngClass]="{'empty': !rowData[subCol.field]?.value}"
                                            (onChange)="onChange($event, rowData, rowIndex, subCol)"
                                            id="{{subCol.field+'_'+rowIndex}}"></p-colorPicker>
                                        <cpdss-portal-validation-error [errors]="fieldError(rowIndex, subCol.field)"
                                            [errorMessages]="subCol.errorMessages">
                                        </cpdss-portal-validation-error>
                                    </ng-container>
                                    <ng-container *ngIf="!rowData[subCol.field]?.isEditMode">
                                        <div class="colorpicker p-colorpicker-preview p-inputtext"
                                            [style.background-color]="rowData[subCol.field]?.value">
                                        </div>
                                    </ng-container>
                                </ng-container>

                                <ng-container *ngSwitchCase="fieldType.ARRAY">
                                    <ng-container *ngIf="rowData[subCol.field]?.isEditMode">
                                        <a class="btn btn-secondary"
                                            (click)="onCellValueClick($event, rowData, rowIndex, subCol)"
                                            id="{{subCol.field+'_'+rowIndex}}">{{rowData[subCol.arrayLabelField] ?
                                            rowData[subCol.arrayLabelField]: subCol.fieldPlaceholder| translate}}</a>
                                        <cpdss-portal-validation-error [errors]="fieldError(rowIndex, subCol.field)"
                                            [errorMessages]="subCol.errorMessages">
                                        </cpdss-portal-validation-error>
                                    </ng-container>
                                    <ng-container *ngIf="!rowData[subCol.field]?.isEditMode">
                                        <a>{{rowData[subCol.arrayLabelField]}}</a>
                                    </ng-container>
                                </ng-container>
                                <ng-container *ngSwitchCase="fieldType.DATERANGE">
                                    <ng-container *ngIf="rowData[subCol.field]?.isEditMode">
                                        <p-calendar appendTo="body" [showButtonBar]="true" [readonlyInput]="true"
                                            (onSelect)="onDateRangeSelect($event, rowIndex, subCol.field, rowData)"
                                            (onClearClick)="onClearDateRange($event, rowIndex, subCol.field,rowData)"
                                            [dateFormat]="subCol.dateFormat" selectionMode="range"
                                            [placeholder]="subCol.fieldPlaceholder| translate"
                                            [minDate]="subCol.minDate" id="{{subCol.field+'_'+rowIndex}}"
                                            #subcoldaterange>
                                            <p-footer><button class="btn btn-main"
                                                    (click)="subcoldaterange.hideOverlay()">{{'DATA_TABLE_OK_BUTTON_LABEL'
                                                    |
                                                    translate}}</button></p-footer>
                                        </p-calendar>
                                        <cpdss-portal-validation-error [errors]="fieldError(rowIndex, subCol.field)"
                                            [errorMessages]="subCol.errorMessages">
                                        </cpdss-portal-validation-error>
                                    </ng-container>
                                    <ng-container *ngIf="!rowData[subCol.field]?.isEditMode">
                                        <span *ngIf="rowData[subCol.field]?.value?.name">{{
                                            rowData[subCol.field]?.value?.name }}</span>
                                        <span *ngIf="!rowData[subCol.field]?.value?.name">{{
                                            rowData[subCol.field]?.value }}</span>
                                    </ng-container>
                                </ng-container>
                                <ng-container *ngSwitchCase="fieldType.DATETIME">
                                    <ng-container *ngIf="rowData[subCol.field]?.isEditMode">
                                        <p-calendar appendTo="body" [showButtonBar]="true" [showTime]="true"
                                            inputId="time"
                                            (onSelect)="onDateTimeSelect($event, rowIndex, subCol.field, rowData)"
                                            [placeholder]="subCol.fieldPlaceholder| translate"
                                            id="{{subCol.field+'_'+rowIndex}}" [minDate]="subCol.minDate"
                                            [dateFormat]="subCol.dateFormat"
                                            (onClearClick)="onDateTimeNotSelected($event, rowIndex, subCol.field,rowData)"
                                            [hideOnDateTimeSelect]="false" #subcoldatetime>
                                            <p-footer><button class="btn btn-main"
                                                    (click)="subcoldatetime.hideOverlay()">{{'DATA_TABLE_OK_BUTTON_LABEL'
                                                    |
                                                    translate}}</button></p-footer>
                                        </p-calendar>
                                        <cpdss-portal-validation-error [errors]="fieldError(rowIndex, subCol.field)"
                                            [errorMessages]="subCol.errorMessages">
                                        </cpdss-portal-validation-error>
                                    </ng-container>
                                    <ng-container *ngIf="!rowData[subCol.field]?.isEditMode">
                                        <span *ngIf="rowData[subCol.field]?.value?.name">{{
                                            rowData[subCol.field]?.value?.name }}</span>
                                        <span *ngIf="!rowData[subCol.field]?.value?.name">{{
                                            rowData[subCol.field]?.value }}</span>
                                    </ng-container>
                                </ng-container>
                                <span *ngSwitchDefault>{{rowData[subCol.field]}}</span>
                            </div>
                        </td>
                    </ng-container>
                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage" let-columns>
                <tr>
                    <td [attr.colspan]="totalColSpan">
                        {{'NO_RECORDS_FOUND'| translate}}
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>